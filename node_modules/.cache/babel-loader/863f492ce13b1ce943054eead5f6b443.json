{"ast":null,"code":"import CommonAside from \"../components/CommenAside.vue\";\nexport default {\n  name: \"Home\",\n  components: {\n    CommonAside\n  },\n\n  created() {\n    if (sessionStorage.getItem(\"store\")) {\n      this.$store.replaceState(Object.assign({}, this.$store.state, JSON.parse(sessionStorage.getItem(\"store\"))));\n    }\n\n    window.addEventListener(\"beforeunload\", () => {\n      sessionStorage.setItem(\"store\", JSON.stringify(this.$store.state));\n    });\n  },\n\n  data() {\n    return {\n      user: JSON.parse(sessionStorage.getItem('user')),\n      imageUrl: JSON.parse(sessionStorage.getItem('usericon')).picurl\n    };\n  },\n\n  methods: {\n    getinfo() {\n      this.user = JSON.parse(sessionStorage.getItem('user'));\n      this.imageUrl = JSON.parse(sessionStorage.getItem('usericon')).picurl;\n      console.log(this.user);\n    },\n\n    logout() {\n      sessionStorage.removeItem('user');\n      sessionStorage.removeItem('usericon');\n    },\n\n    init_personal() {\n      this.$axios({\n        method: \"post\",\n        url: \"http://localhost:8000/user/\",\n        data: qs.stringify({\n          function_id: 5,\n          user_id: JSON.parse(sessionStorage.getItem('user')).userId\n        })\n      }).then(res => {\n        this.username = res.data.Username;\n      }).catch(err => {\n        console.log(err);\n        /* 若出现异常则在终端输出相关信息 */\n      });\n    }\n\n  },\n\n  mounted() {\n    this.getinfo(); // this.init_personal();\n  }\n\n};","map":{"version":3,"mappings":"AAwCA;AAGA;EACAA,YADA;EAEAC;IACAC;EADA,CAFA;;EAKAC;IAEA;MACA;IACA;;IAEAC;MACAC;IACA,CAFA;EAGA,CAdA;;EAeAC;IACA;MACAC,gDADA;MAEAC;IAFA;EAKA,CArBA;;EAsBAC;IACAC;MACA;MACA;MACAC;IACA,CALA;;IAMAC;MACAP;MACAA;IACA,CATA;;IAUAQ;MACA;QACAC,cADA;QAEAC,kCAFA;QAGAT;UACAU,cADA;UAEAC;QAFA;MAHA,GAQAC,IARA,CAQAC;QACA;MACA,CAVA,EAWAC,KAXA,CAWAC;QACAV;QAAA;MACA,CAbA;IAcA;;EAzBA,CAtBA;;EAiDAW;IACA,eADA,CAEA;EACA;;AApDA","names":["name","components","CommonAside","created","window","sessionStorage","data","user","imageUrl","methods","getinfo","console","logout","init_personal","method","url","function_id","user_id","then","res","catch","err","mounted"],"sourceRoot":"src/views","sources":["HomePage.vue"],"sourcesContent":["<template>\r\n  <el-container>\r\n    <el-header style=\"height:80px;\">\r\n        <div class=\"h\">\r\n          <img src=\"../assets/logo.png\" alt=\"\">\r\n          <div v-if=\"user==null\">\r\n              <a href=\"../Login\" id=\"login\">登录</a>\r\n              <a href=\"../register\" id=\"register\">注册</a>\r\n          </div>\r\n          <div v-else>\r\n            <div v-if=\"this.imageUrl==''||this.imageUrl==null\">\r\n              <a href=\"../user\" id=\"icon\">\r\n              <img src=\"../assets/logo.png\" alt=\"\" style=\"border-radius:50%\">\r\n              </a>\r\n            </div>\r\n            <div v-else>\r\n                <a href=\"../user\" id=\"icon\">\r\n              <img :src=\"imageUrl\" alt=\"\" style=\"border-radius:50%\">\r\n              </a>\r\n            </div>\r\n\r\n              \r\n              <a href=\"../user\" id=\"login\">{{user.username}}</a>\r\n              <a href=\"../FirstPage\" id=\"logout\" @click=\"logout\">登出</a>\r\n          </div>\r\n          </div>\r\n          \r\n    </el-header>\r\n    <el-container>\r\n      <el-aside width=\"auto\">\r\n      <common-aside></common-aside>\r\n    </el-aside>\r\n      <el-main>\r\n        <router-view></router-view>\r\n      </el-main>\r\n    </el-container>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport CommonAside from \"../components/CommenAside.vue\";\r\n\r\n\r\nexport default {\r\n  name: \"Home\",\r\n  components: {\r\n    CommonAside,\r\n  },\r\n   created () {\r\n\r\n    if (sessionStorage.getItem(\"store\") ) {\r\n        this.$store.replaceState(Object.assign({}, this.$store.state,JSON.parse(sessionStorage.getItem(\"store\"))))\r\n    } \r\n\r\n    window.addEventListener(\"beforeunload\",()=>{\r\n        sessionStorage.setItem(\"store\",JSON.stringify(this.$store.state))\r\n    })\r\n  },\r\n  data() {\r\n    return {\r\n      user: JSON.parse(sessionStorage.getItem('user')),\r\n      imageUrl: JSON.parse(sessionStorage.getItem('usericon')).picurl,\r\n    };\r\n    \r\n  },\r\n  methods:{\r\n    getinfo(){\r\n      this.user =  JSON.parse(sessionStorage.getItem('user'));\r\n      this.imageUrl = JSON.parse(sessionStorage.getItem('usericon')).picurl;\r\n      console.log(this.user)\r\n    },\r\n    logout(){\r\n      sessionStorage.removeItem('user');\r\n      sessionStorage.removeItem('usericon');\r\n    },\r\n     init_personal(){\r\n         this.$axios({\r\n        method: \"post\",\r\n        url: \"http://localhost:8000/user/\",\r\n        data: qs.stringify({\r\n          function_id: 5,\r\n          user_id: JSON.parse(sessionStorage.getItem('user')).userId,\r\n        }),\r\n      })\r\n        .then((res) => {\r\n              this.username=res.data.Username;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err); /* 若出现异常则在终端输出相关信息 */\r\n        });\r\n      },\r\n  },\r\n  mounted(){\r\n      this.getinfo();\r\n      // this.init_personal();\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-main {\r\n     /* overflow:visible;  */\r\n    /* padding-top: 0;  */\r\n  position: absolute;\r\n  left: 200px;\r\n  right: 0;\r\n  top: 80px;\r\n  bottom: 0;\r\n  overflow-y: scroll;\r\n  }\r\n  .el-aside{\r\n   display: block;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 80px;\r\n  bottom: 0;\r\n}\r\n.el-header {\r\n  background-color: white;\r\n  text-align: left;\r\n  color:black;\r\n  /* box-shadow: 1px 1px 10px rgb(240, 242, 245); */\r\n   box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);\r\n  z-index: 1;\r\n}\r\n\r\n.h{\r\n  margin-top: 10px;\r\n  display: flex;\r\n}\r\n.h img{\r\n  width: 100px;\r\n  height: 65px;\r\n  margin-left: 32px;\r\n}\r\n.h a{\r\n  text-decoration: none;\r\n  position: absolute;\r\n  color: black;\r\n  vertical-align: middle;\r\n}\r\n.h span{\r\n  font: bold; \r\n  padding-bottom: 50px;\r\n  align-items: center;\r\n}\r\n.h a:hover{\r\n  color: wheat;\r\n}\r\n.h #icon{\r\n  right: 142px;\r\n  top: 10px;\r\n}\r\n.h #icon img{\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n}\r\n.h #login{\r\n  right: 80px;\r\n  top: 29px;\r\n}\r\n.h #register{\r\n  right: 30px;\r\n  top: 29px;\r\n}\r\n.h #logout{\r\n  right:30px;\r\n  top: 29px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}